/* app/globals.css */

/* IMPORTANTE: Estas directivas son necesarias para Tailwind CSS y son procesadas correctamente por PostCSS durante la compilación.
   Los errores de lint "Unknown at rule @tailwind" son ESPERADOS y pueden ignorarse con seguridad.
   NO eliminar estas directivas ya que son fundamentales para que funcione Tailwind CSS. */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Paleta de grises base */
    --gray-50: #fafafa;
    --gray-100: #f5f5f5;
    --gray-200: #e5e5e5;
    --gray-300: #d4d4d4;
    --gray-400: #a3a3a3;
    --gray-500: #737373;
    --gray-600: #525252;
    --gray-700: #404040;
    --gray-800: #262626;
    --gray-900: #171717;
    --gray-950: #0a0a0a;

    /* Variables semánticas - Tema oscuro exclusivo */
    --background: var(--gray-950);
    --foreground: var(--gray-300);
    --card: var(--gray-900);
    --card-foreground: var(--gray-300);
    --popover: var(--gray-800);
    --popover-foreground: var(--gray-300);
    --primary: var(--gray-600);
    --primary-foreground: var(--gray-300);
    --secondary: var(--gray-800);
    --secondary-foreground: var(--gray-300);
    --muted: var(--gray-800);
    --muted-foreground: var(--gray-500);
    --accent: var(--gray-800);
    --accent-foreground: var(--gray-300);
    --destructive: #ff6467;
    --destructive-foreground: var(--gray-800);
    --border: var(--gray-800);
    --input: var(--gray-800);
    --ring: var(--gray-600);
    --tw-ring-color: var(--gray-600);
    --tw-ring-offset-color: transparent;
    --tw-ring-offset-width: 0px;
    --tw-ring-offset-shadow: none;
    --tw-ring-shadow: 0 0 0 1px var(--border);

    /* Variables específicas de la aplicación */
    --chart-1: var(--gray-600);
    --chart-2: var(--gray-500);
    --chart-3: var(--gray-400);
    --chart-4: var(--gray-300);
    --chart-5: var(--gray-200);
    
    --sidebar: var(--gray-900);
    --sidebar-foreground: var(--gray-300);
    --sidebar-primary: var(--gray-300);
    --sidebar-primary-foreground: var(--gray-900);
    --sidebar-accent: var(--gray-800);
    --sidebar-accent-foreground: var(--gray-300);
    --sidebar-border: var(--gray-800);
    --sidebar-ring: var(--gray-600);

    /* Tipografía y radios */
    --font-sans: Geist Mono, monospace;
    --font-serif: Geist Mono, monospace;
    --font-mono: Geist Mono, monospace;
    --radius: 0.375rem;

    /* Sistema de sombras base - Optimizado para modo oscuro */
    --shadow-color: 0deg 0% 0%;
    --shadow-strength: 5%;
    
    /* Variables de sombra que usan las variables de color y fuerza */
    --shadow-2xs: 0 1px 2px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 2%));
    --shadow-xs: 0 1px 3px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 3%));
    --shadow-sm: 0 1px 4px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 4%));
    --shadow: 0 2px 4px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 5%));
    --shadow-md: 0 3px 6px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 6%));
    --shadow-lg: 0 4px 8px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 7%));
    --shadow-xl: 0 6px 12px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 8%));
    --shadow-2xl: 0 8px 16px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 9%));
  }
}

/* Configuración optimizada para modo oscuro exclusivo */
/* No usamos media queries para preferencias de color ya que siempre usamos tema oscuro */

@layer base {
  * {
    border-color: var(--border);
  }
  body {
    background-color: var(--background);
    color: var(--foreground);
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Solución robusta para eliminar marcadores de desarrollo */
  [data-component-name],
  div[data-component-name],
  span[data-component-name],
  button[data-component-name] {
    all: unset !important;
    display: contents !important;
  }

  /* Reglas específicas para los elementos del ToggleGroup */
  [role="radio"][data-radix-collection-item] {
    display: inline-flex !important;
  }

  /* Reglas para mantener el estilo de texto dentro de elementos con data-component */
  [data-component-name] * {
    all: revert;
  }
  
  /* Estilos específicos para los paneles laterales */
  [data-component-name="LeftControlPanel"],
  [data-component-name="LeftControlPanel"] > div,
  [data-component-name="RightControlPanel"],
  [data-component-name="RightControlPanel"] .h-full,
  [data-component-name="RightControlPanel"] .w-full,
  [data-component-name="RightControlPanel"] [data-radix-scroll-area-viewport],
  [data-component-name="RightControlPanel"] > div {
    background-color: hsl(var(--background)) !important;
  }
  
  /* Estilos para inputs que respetan el tema */
  input, select, textarea {
    color: var(--foreground);
    background-color: var(--card);
    border-color: var(--border);
  }

  .dark input, .dark select, .dark textarea {
    background-color: var(--card);
    color: var(--foreground);
    border-color: var(--border);
  }

  /* Estilos para Slider que respetan el tema */
  [role="slider"] {
    background-color: var(--card);
    border: 2px solid var(--primary);
    transition: all 0.2s ease-in-out;
  }
  
  [role="slider"] {
    background-color: color-mix(in srgb, var(--primary) 15%, var(--card));
    border: 2px solid var(--primary);
    transition: all 0.2s ease-in-out;
    box-shadow: 0 0 0 1px var(--border);
  }
  
  [role="slider"]:hover {
    background-color: color-mix(in srgb, var(--primary) 20%, var(--card));
  }
  
  [role="slider"]:active,
  [role="slider"][data-dragging="true"] {
    background-color: color-mix(in srgb, var(--primary) 30%, var(--card));
  }
  
  /* Track y range del slider */
  .dark [data-orientation="horizontal"].bg-muted {
    background-color: var(--muted);
    height: 6px;
    border-radius: 9999px;
  }
  
  .dark [data-orientation="horizontal"] .bg-primary {
    background-color: var(--primary);
    height: 100%;
    border-radius: 9999px;
  }

  .dark [data-orientation="horizontal"][data-disabled] {
    opacity: 0.5;
  }

  .dark [data-orientation="horizontal"]:hover .bg-primary {
    background-color: color-mix(in srgb, var(--primary) 90%, white);
  }

  /* Estilos para la barra de control superior */
  .dark [role="switch"] {
    background-color: var(--input);
  }

  .dark [role="switch"][data-state="checked"] {
    background-color: var(--primary);
  }

  .dark [role="switch"] span {
    background-color: var(--card);
  }

  .dark [role="switch"][data-state="checked"] span {
    background-color: var(--card-foreground);
  }

  .bg-card\/80 {
    background-color: color-mix(in srgb, var(--card) 95%, transparent);
  }

  /* Estilos para el canvas */
  canvas {
    border: 1px solid var(--border);
    background-color: var(--background);
  }

  /* Ajuste de contraste para elementos del canvas */
  [data-vector-grid-container] canvas {
    filter: contrast(0.98) brightness(0.98);
    background-color: var(--background);
  }

  /* Estilos para las columnas laterales */
  .dark [role="complementary"],
  .dark aside {
    background-color: color-mix(in srgb, var(--card) 90%, transparent);
    border-color: var(--border);
    backdrop-filter: blur(8px);
  }

  .dark [role="complementary"] > div,
  .dark aside > div {
    background-color: var(--card);
    border-color: var(--border);
  }

  /* Ajuste de contraste para paneles */
  .dark .bg-background,
  .dark .bg-card {
    background-color: var(--card);
  }

  .dark .bg-background\/80,
  .dark .bg-card\/80 {
    background-color: color-mix(in srgb, var(--card) 95%, transparent);
  }

  /* Estilos para botones en modo oscuro */
  [data-slot="button"] {
    background-color: var(--card);
    border-color: var(--border);
    color: var(--foreground);
    outline: none;
  }

  [data-slot="button"]:hover {
    background-color: var(--accent);
    color: var(--accent-foreground);
    border-color: var(--accent);
  }

  [data-slot="button"]:active {
    background-color: color-mix(in srgb, var(--accent) 90%, black);
  }

  [data-slot="button"].bg-background {
    background-color: var(--card);
  }

  [data-slot="button"].bg-input\/30 {
    background-color: color-mix(in srgb, var(--card) 95%, transparent);
  }
  
  /* Eliminar outline en todos los botones y personalizar bordes */
  button,
  [role="button"],
  [data-slot="button"],
  .inline-flex {
    outline: none !important;
  }
  
  /* Personalizar bordes de botones */
  [data-slot="button"],
  button.border {
    border-width: 1px;
    border-style: solid;
    border-color: transparent !important;
  }
  
  .dark [data-slot="button"],
  .dark button.border {
    border-color: transparent !important;
  }
  
  /* Mejora de la apariencia del foco en botones */
  [data-slot="button"]:focus-visible,
  button:focus-visible {
    outline: none !important;
    border-color: var(--border) !important;
    box-shadow: 0 0 0 1px var(--border) !important;
  }
  
  /* Sobrescribir estilos de anillos de foco predeterminados */
  .focus-visible\:ring-ring:focus-visible,
  .focus-visible\:ring-\[3px\]:focus-visible,
  .focus-visible\:border-ring:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 1px var(--border) !important;
    border-color: var(--border) !important;
  }
  
  /* Clase dark eliminada ya que siempre usamos tema oscuro */
  
  /* Estilos de anillos optimizados para rendimiento */
  [data-app-root] [class*="ring"],
  [data-app-root] :focus,
  [data-app-root] :focus-visible {
    --tw-ring-offset-color: transparent !important;
    --tw-ring-color: var(--border) !important;
  }
  
  /* Personalizar borde inferior de la barra superior */
  .h-14.border-b.border-border {
    border-bottom: none !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  }
  
  .dark .h-14.border-b.border-border {
    border-bottom: none !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
  }
  
  /* Mejorar los bordes laterales de las columnas en desktop/tablet */
  @media (min-width: 768px) {
    /* Usando el valor de sombra 0.1 para mejor contraste */
    .md\:border-r.border-border {
      border-right: none !important;
      box-shadow: 4px 0 8px -4px rgba(0, 0, 0, 0.1) !important;
    }
    
    .md\:border-l.border-border {
      border-left: none !important;
      box-shadow: -4px 0 8px -4px rgba(0, 0, 0, 0.1) !important;
    }
  }
  
  /* Mejorar el contenedor principal de visualización */
  [role="main"] > .border.border-muted {
    border: none !important;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.15) !important;
  }
  
  /* Mejorar los módulos de parámetros de animación */
  .space-y-3.border.border-border.rounded-md {
    border: none !important;
    background-color: color-mix(in srgb, var(--card) 70%, var(--background)) !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08) !important;
  }
}